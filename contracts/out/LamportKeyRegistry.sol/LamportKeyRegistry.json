{"abi":[{"type":"function","name":"advanceKey","inputs":[{"name":"chainId","type":"bytes32","internalType":"bytes32"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"chainCount","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"deactivateChain","inputs":[{"name":"chainId","type":"bytes32","internalType":"bytes32"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"getChainInfo","inputs":[{"name":"chainId","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"owner","type":"address","internalType":"address"},{"name":"currentIndex","type":"uint256","internalType":"uint256"},{"name":"totalKeys","type":"uint256","internalType":"uint256"},{"name":"usedCount","type":"uint256","internalType":"uint256"},{"name":"active","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"getCurrentPKH","inputs":[{"name":"chainId","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"currentPKH","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"getNextPKH","inputs":[{"name":"chainId","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"nextPKH","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"getOwnerChains","inputs":[{"name":"owner","type":"address","internalType":"address"}],"outputs":[{"name":"chainIds","type":"bytes32[]","internalType":"bytes32[]"}],"stateMutability":"view"},{"type":"function","name":"getRemainingKeys","inputs":[{"name":"chainId","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"remaining","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"keyChains","inputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"currentIndex","type":"uint256","internalType":"uint256"},{"name":"usedCount","type":"uint256","internalType":"uint256"},{"name":"owner","type":"address","internalType":"address"},{"name":"active","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"ownerChains","inputs":[{"name":"","type":"address","internalType":"address"},{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"registerKeyChain","inputs":[{"name":"pkhs","type":"bytes32[]","internalType":"bytes32[]"}],"outputs":[{"name":"chainId","type":"bytes32","internalType":"bytes32"}],"stateMutability":"nonpayable"},{"type":"function","name":"usedPKHs","inputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"event","name":"KeyChainDeactivated","inputs":[{"name":"chainId","type":"bytes32","indexed":true,"internalType":"bytes32"}],"anonymous":false},{"type":"event","name":"KeyChainRegistered","inputs":[{"name":"chainId","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"owner","type":"address","indexed":true,"internalType":"address"},{"name":"keyCount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"KeyUsed","inputs":[{"name":"chainId","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"pkh","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"index","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"ChainExhausted","inputs":[]},{"type":"error","name":"ChainNotActive","inputs":[]},{"type":"error","name":"ChainNotFound","inputs":[]},{"type":"error","name":"EmptyKeyArray","inputs":[]},{"type":"error","name":"InvalidPKH","inputs":[]},{"type":"error","name":"NotChainOwner","inputs":[]},{"type":"error","name":"PKHAlreadyUsed","inputs":[]}],"bytecode":{"object":"0x6080604052348015600e575f5ffd5b50610a108061001c5f395ff3fe608060405234801561000f575f5ffd5b50600436106100b1575f3560e01c80637e482f471161006e5780637e482f47146101a0578063ba8285c81461021f578063c61663b014610232578063c911015314610245578063ce051de914610277578063e02e1bfd14610297575f5ffd5b806314c0a9b3146100b5578063226b09d4146100db57806352f4e24c146100f0578063650e270d1461010357806372530be814610116578063758b9ac01461018d575b5f5ffd5b6100c86100c3366004610848565b6102a0565b6040519081526020015b60405180910390f35b6100ee6100e9366004610848565b6102d9565b005b6100c86100fe36600461087a565b610410565b6100c8610111366004610848565b61043b565b61015c610124366004610848565b5f602081905290815260409020600181015460028201546003909201549091906001600160a01b03811690600160a01b900460ff1684565b6040516100d2949392919093845260208401929092526001600160a01b031660408301521515606082015260800190565b6100ee61019b366004610848565b6104c2565b6101eb6101ae366004610848565b5f9081526020819052604090206003810154600182015482546002909301546001600160a01b038316949193929091600160a01b90910460ff1690565b604080516001600160a01b03909616865260208601949094529284019190915260608301521515608082015260a0016100d2565b6100c861022d366004610848565b610539565b6100c86102403660046108a2565b6105be565b610267610253366004610848565b60026020525f908152604090205460ff1681565b60405190151581526020016100d2565b61028a610285366004610913565b610782565b6040516100d2919061092c565b6100c860035481565b5f81815260208190526040812080546001820154106102c157505f92915050565b600181015481546102d29190610982565b9392505050565b5f81815260208190526040902060038101546001600160a01b03163314610313576040516311c29acf60e31b815260040160405180910390fd5b6003810154600160a01b900460ff1661033f5760405163296be49760e21b815260040160405180910390fd5b80546001820154106103645760405163808a06c360e01b815260040160405180910390fd5b5f815f0182600101548154811061037d5761037d61099b565b5f9182526020808320919091015480835260028252604092839020805460ff1916600190811790915585015492519283529250829185917f7d0402de2cf7f137719bb73adbc7b842122bcb06cf27096b796c7fa97b8ba6c5910160405180910390a3600182018054905f6103f0836109af565b9091555050600282018054905f610406836109af565b9190505550505050565b6001602052815f5260405f208181548110610429575f80fd5b905f5260205f20015f91509150505481565b5f8181526020819052604081206003810154600160a01b900460ff166104745760405163296be49760e21b815260040160405180910390fd5b80546001820154106104995760405163808a06c360e01b815260040160405180910390fd5b805f018160010154815481106104b1576104b161099b565b905f5260205f200154915050919050565b5f81815260208190526040902060038101546001600160a01b031633146104fc576040516311c29acf60e31b815260040160405180910390fd5b60038101805460ff60a01b1916905560405182907f46ca817d1172b69a5e4504d8366d7cd293e43183141862ae6fa8a5648b206479905f90a25050565b5f8181526020819052604081206003810154600160a01b900460ff166105725760405163296be49760e21b815260040160405180910390fd5b5f8160010154600161058491906109c7565b8254909150811061059857505f9392505050565b815f0181815481106105ac576105ac61099b565b905f5260205f20015492505050919050565b5f8181036105df57604051630415ffdf60e11b815260040160405180910390fd5b5f5b82811015610678575f8484838181106105fc576105fc61099b565b9050602002013503610621576040516311ebfe4960e11b815260040160405180910390fd5b60025f8585848181106106365761063661099b565b602090810292909201358352508101919091526040015f205460ff1615610670576040516365a91d6360e11b815260040160405180910390fd5b6001016105e1565b506003805433915f610689836109af565b9091555060405160609290921b6bffffffffffffffffffffffff19166020830152603482015242605482015260740160408051601f1981840301815291815281516020928301205f8181529283905291209091506106e88185856107eb565b505f60018083018290556002830182905560038301805460ff60a01b19339081166001600160a81b031990921691909117600160a01b17909155808352602082815260408085208054948501815585529320909101849055905183907ff092799d5f881c9c29000722f7668f043316940a8af4d460d785f821c0a8872a906107739087815260200190565b60405180910390a35092915050565b6001600160a01b0381165f908152600160209081526040918290208054835181840281018401909452808452606093928301828280156107df57602002820191905f5260205f20905b8154815260200190600101908083116107cb575b50505050509050919050565b828054828255905f5260205f20908101928215610824579160200282015b82811115610824578235825591602001919060010190610809565b50610830929150610834565b5090565b5b80821115610830575f8155600101610835565b5f60208284031215610858575f5ffd5b5035919050565b80356001600160a01b0381168114610875575f5ffd5b919050565b5f5f6040838503121561088b575f5ffd5b6108948361085f565b946020939093013593505050565b5f5f602083850312156108b3575f5ffd5b823567ffffffffffffffff8111156108c9575f5ffd5b8301601f810185136108d9575f5ffd5b803567ffffffffffffffff8111156108ef575f5ffd5b8560208260051b8401011115610903575f5ffd5b6020919091019590945092505050565b5f60208284031215610923575f5ffd5b6102d28261085f565b602080825282518282018190525f918401906040840190835b81811015610963578351835260209384019390920191600101610945565b509095945050505050565b634e487b7160e01b5f52601160045260245ffd5b818103818111156109955761099561096e565b92915050565b634e487b7160e01b5f52603260045260245ffd5b5f600182016109c0576109c061096e565b5060010190565b808201808211156109955761099561096e56fea2646970667358221220619374ccad14e74a69730f7a6f8ae718921b095bcee85fcb8315cfd2fffad7a664736f6c634300081f0033","sourceMap":"522:8560:2:-:0;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561000f575f5ffd5b50600436106100b1575f3560e01c80637e482f471161006e5780637e482f47146101a0578063ba8285c81461021f578063c61663b014610232578063c911015314610245578063ce051de914610277578063e02e1bfd14610297575f5ffd5b806314c0a9b3146100b5578063226b09d4146100db57806352f4e24c146100f0578063650e270d1461010357806372530be814610116578063758b9ac01461018d575b5f5ffd5b6100c86100c3366004610848565b6102a0565b6040519081526020015b60405180910390f35b6100ee6100e9366004610848565b6102d9565b005b6100c86100fe36600461087a565b610410565b6100c8610111366004610848565b61043b565b61015c610124366004610848565b5f602081905290815260409020600181015460028201546003909201549091906001600160a01b03811690600160a01b900460ff1684565b6040516100d2949392919093845260208401929092526001600160a01b031660408301521515606082015260800190565b6100ee61019b366004610848565b6104c2565b6101eb6101ae366004610848565b5f9081526020819052604090206003810154600182015482546002909301546001600160a01b038316949193929091600160a01b90910460ff1690565b604080516001600160a01b03909616865260208601949094529284019190915260608301521515608082015260a0016100d2565b6100c861022d366004610848565b610539565b6100c86102403660046108a2565b6105be565b610267610253366004610848565b60026020525f908152604090205460ff1681565b60405190151581526020016100d2565b61028a610285366004610913565b610782565b6040516100d2919061092c565b6100c860035481565b5f81815260208190526040812080546001820154106102c157505f92915050565b600181015481546102d29190610982565b9392505050565b5f81815260208190526040902060038101546001600160a01b03163314610313576040516311c29acf60e31b815260040160405180910390fd5b6003810154600160a01b900460ff1661033f5760405163296be49760e21b815260040160405180910390fd5b80546001820154106103645760405163808a06c360e01b815260040160405180910390fd5b5f815f0182600101548154811061037d5761037d61099b565b5f9182526020808320919091015480835260028252604092839020805460ff1916600190811790915585015492519283529250829185917f7d0402de2cf7f137719bb73adbc7b842122bcb06cf27096b796c7fa97b8ba6c5910160405180910390a3600182018054905f6103f0836109af565b9091555050600282018054905f610406836109af565b9190505550505050565b6001602052815f5260405f208181548110610429575f80fd5b905f5260205f20015f91509150505481565b5f8181526020819052604081206003810154600160a01b900460ff166104745760405163296be49760e21b815260040160405180910390fd5b80546001820154106104995760405163808a06c360e01b815260040160405180910390fd5b805f018160010154815481106104b1576104b161099b565b905f5260205f200154915050919050565b5f81815260208190526040902060038101546001600160a01b031633146104fc576040516311c29acf60e31b815260040160405180910390fd5b60038101805460ff60a01b1916905560405182907f46ca817d1172b69a5e4504d8366d7cd293e43183141862ae6fa8a5648b206479905f90a25050565b5f8181526020819052604081206003810154600160a01b900460ff166105725760405163296be49760e21b815260040160405180910390fd5b5f8160010154600161058491906109c7565b8254909150811061059857505f9392505050565b815f0181815481106105ac576105ac61099b565b905f5260205f20015492505050919050565b5f8181036105df57604051630415ffdf60e11b815260040160405180910390fd5b5f5b82811015610678575f8484838181106105fc576105fc61099b565b9050602002013503610621576040516311ebfe4960e11b815260040160405180910390fd5b60025f8585848181106106365761063661099b565b602090810292909201358352508101919091526040015f205460ff1615610670576040516365a91d6360e11b815260040160405180910390fd5b6001016105e1565b506003805433915f610689836109af565b9091555060405160609290921b6bffffffffffffffffffffffff19166020830152603482015242605482015260740160408051601f1981840301815291815281516020928301205f8181529283905291209091506106e88185856107eb565b505f60018083018290556002830182905560038301805460ff60a01b19339081166001600160a81b031990921691909117600160a01b17909155808352602082815260408085208054948501815585529320909101849055905183907ff092799d5f881c9c29000722f7668f043316940a8af4d460d785f821c0a8872a906107739087815260200190565b60405180910390a35092915050565b6001600160a01b0381165f908152600160209081526040918290208054835181840281018401909452808452606093928301828280156107df57602002820191905f5260205f20905b8154815260200190600101908083116107cb575b50505050509050919050565b828054828255905f5260205f20908101928215610824579160200282015b82811115610824578235825591602001919060010190610809565b50610830929150610834565b5090565b5b80821115610830575f8155600101610835565b5f60208284031215610858575f5ffd5b5035919050565b80356001600160a01b0381168114610875575f5ffd5b919050565b5f5f6040838503121561088b575f5ffd5b6108948361085f565b946020939093013593505050565b5f5f602083850312156108b3575f5ffd5b823567ffffffffffffffff8111156108c9575f5ffd5b8301601f810185136108d9575f5ffd5b803567ffffffffffffffff8111156108ef575f5ffd5b8560208260051b8401011115610903575f5ffd5b6020919091019590945092505050565b5f60208284031215610923575f5ffd5b6102d28261085f565b602080825282518282018190525f918401906040840190835b81811015610963578351835260209384019390920191600101610945565b509095945050505050565b634e487b7160e01b5f52601160045260245ffd5b818103818111156109955761099561096e565b92915050565b634e487b7160e01b5f52603260045260245ffd5b5f600182016109c0576109c061096e565b5060010190565b808201808211156109955761099561096e56fea2646970667358221220619374ccad14e74a69730f7a6f8ae718921b095bcee85fcb8315cfd2fffad7a664736f6c634300081f0033","sourceMap":"522:8560:2:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;7403:277;;;;;;:::i;:::-;;:::i;:::-;;;345:25:58;;;333:2;318:18;7403:277:2;;;;;;;;6750:511;;;;;;:::i;:::-;;:::i;:::-;;1964:48;;;;;;:::i;:::-;;:::i;5687:334::-;;;;;;:::i;:::-;;:::i;1869:45::-;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;1869:45:2;;;-1:-1:-1;;;1869:45:2;;;;;;;;;;;;;;;1225:25:58;;;1281:2;1266:18;;1259:34;;;;-1:-1:-1;;;;;1329:32:58;1324:2;1309:18;;1302:60;1405:14;1398:22;1393:2;1378:18;;1371:50;1212:3;1197:19;;1000:427;7811:247:2;;;;;;:::i;:::-;;:::i;8640:440::-;;;;;;:::i;:::-;8725:13;8885:18;;;;;;;;;;8934:11;;;;;8959:18;;;8991:17;;9022:15;;;;;-1:-1:-1;;;;;8934:11:2;;;8959:18;;8991:17;9022:15;;-1:-1:-1;;;9051:12:2;;;;;;8640:440;;;;;-1:-1:-1;;;;;1703:32:58;;;1685:51;;1767:2;1752:18;;1745:34;;;;1795:18;;;1788:34;;;;1853:2;1838:18;;1831:34;1909:14;1902:22;1896:3;1881:19;;1874:51;1672:3;1657:19;8640:440:2;1432:499:58;6197:408:2;;;;;;:::i;:::-;;:::i;4625:916::-;;;;;;:::i;:::-;;:::i;2075:40::-;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;2716:14:58;;2709:22;2691:41;;2679:2;2664:18;2075:40:2;2551:187:58;8194:145:2;;;;;;:::i;:::-;;:::i;:::-;;;;;;;:::i;2167:25::-;;;;;;7403:277;7483:17;7537:18;;;;;;;;;;7591:17;;7569:18;;;;:39;7565:53;;-1:-1:-1;7617:1:2;;7403:277;-1:-1:-1;;7403:277:2:o;7565:53::-;7655:18;;;;7635:17;;:38;;7655:18;7635:38;:::i;:::-;7628:45;7403:277;-1:-1:-1;;;7403:277:2:o;6750:511::-;6806:22;6831:18;;;;;;;;;;6863:11;;;;-1:-1:-1;;;;;6863:11:2;6878:10;6863:25;6859:53;;6897:15;;-1:-1:-1;;;6897:15:2;;;;;;;;;;;6859:53;6927:12;;;;-1:-1:-1;;;6927:12:2;;;;6922:42;;6948:16;;-1:-1:-1;;;6948:16:2;;;;;;;;;;;6922:42;7000:17;;6978:18;;;;:39;6974:68;;7026:16;;-1:-1:-1;;;7026:16:2;;;;;;;;;;;6974:68;7053:15;7071:5;:10;;7082:5;:18;;;7071:30;;;;;;;;:::i;:::-;;;;;;;;;;;;;;7111:17;;;:8;:17;;;;;;;:24;;-1:-1:-1;;7111:24:2;7131:4;7111:24;;;;;;7177:18;;;7151:45;;345:25:58;;;7071:30:2;-1:-1:-1;7071:30:2;;7159:7;;7151:45;;318:18:58;7151:45:2;;;;;;;7207:18;;;:20;;;:18;:20;;;:::i;:::-;;;;-1:-1:-1;;7237:15:2;;;:17;;;:15;:17;;;:::i;:::-;;;;;;6796:465;;6750:511;:::o;1964:48::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;5687:334::-;5764:18;5819;;;;;;;;;;5852:12;;;;-1:-1:-1;;;5852:12:2;;;;5847:42;;5873:16;;-1:-1:-1;;;5873:16:2;;;;;;;;;;;5847:42;5925:17;;5903:18;;;;:39;5899:68;;5951:16;;-1:-1:-1;;;5951:16:2;;;;;;;;;;;5899:68;5984:5;:10;;5995:5;:18;;;5984:30;;;;;;;;:::i;:::-;;;;;;;;;5977:37;;;5687:334;;;:::o;7811:247::-;7872:22;7897:18;;;;;;;;;;7929:11;;;;-1:-1:-1;;;;;7929:11:2;7944:10;7929:25;7925:53;;7963:15;;-1:-1:-1;;;7963:15:2;;;;;;;;;;;7925:53;7988:12;;;:20;;-1:-1:-1;;;;7988:20:2;;;8023:28;;8043:7;;8023:28;;8003:5;;8023:28;7862:196;7811:247;:::o;6197:408::-;6271:15;6323:18;;;;;;;;;;6356:12;;;;-1:-1:-1;;;6356:12:2;;;;6351:42;;6377:16;;-1:-1:-1;;;6377:16:2;;;;;;;;;;;6351:42;6404:17;6424:5;:18;;;6445:1;6424:22;;;;:::i;:::-;6473:17;;6404:42;;-1:-1:-1;6460:30:2;;6456:105;;-1:-1:-1;6521:1:2;;6197:408;-1:-1:-1;;;6197:408:2:o;6456:105::-;6577:5;:10;;6588:9;6577:21;;;;;;;;:::i;:::-;;;;;;;;;6570:28;;;;6197:408;;;:::o;4625:916::-;4708:15;4739:16;;;4735:44;;4764:15;;-1:-1:-1;;;4764:15:2;;;;;;;;;;;4735:44;4856:9;4851:173;4871:15;;;4851:173;;;4930:1;4911:4;;4916:1;4911:7;;;;;;;:::i;:::-;;;;;;;:21;4907:46;;4941:12;;-1:-1:-1;;;4941:12:2;;;;;;;;;;;4907:46;4971:8;:17;4980:4;;4985:1;4980:7;;;;;;;:::i;:::-;;;;;;;;;;4971:17;;-1:-1:-1;4971:17:2;;;;;;;;-1:-1:-1;4971:17:2;;;;4967:46;;;4997:16;;-1:-1:-1;;;4997:16:2;;;;;;;;;;;4967:46;4888:3;;4851:173;;;-1:-1:-1;5137:10:2;:12;;5113:10;;5137;:12;;;:::i;:::-;;;;-1:-1:-1;5083:105:2;;4422:2:58;4418:15;;;;-1:-1:-1;;4414:53:58;5083:105:2;;;4402:66:58;4484:12;;;4477:28;5163:15:2;4521:12:58;;;4514:28;4558:12;;5083:105:2;;;-1:-1:-1;;5083:105:2;;;;;;;;;5073:116;;5083:105;5073:116;;;;5224:22;5249:18;;;;;;;;;5073:116;;-1:-1:-1;5277:17:2;5249:18;5290:4;;5277:17;:::i;:::-;-1:-1:-1;5325:1:2;5304:18;;;;:22;;;5336:15;;;:19;;;5365:11;;;:24;;-1:-1:-1;;;;5379:10:2;5399:19;;;-1:-1:-1;;;;;;5399:19:2;;;;;;;-1:-1:-1;;;5399:19:2;;;;5429:23;;;;;;;;;;;:37;;;;;;;;;;;;;;;;;5482:52;;5458:7;;5482:52;;;;5522:4;345:25:58;;333:2;318:18;;199:177;5482:52:2;;;;;;;;4725:816;4625:916;;;;:::o;8194:145::-;-1:-1:-1;;;;;8314:18:2;;;;;;:11;:18;;;;;;;;;8307:25;;;;;;;;;;;;;;;;;8270;;8307;;;8314:18;8307:25;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8194:145;;;:::o;-1:-1:-1:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;:::o;:::-;;;;;;;;;;;;;;;14:180:58;73:6;126:2;114:9;105:7;101:23;97:32;94:52;;;142:1;139;132:12;94:52;-1:-1:-1;165:23:58;;14:180;-1:-1:-1;14:180:58:o;381:173::-;449:20;;-1:-1:-1;;;;;498:31:58;;488:42;;478:70;;544:1;541;534:12;478:70;381:173;;;:::o;559:254::-;627:6;635;688:2;676:9;667:7;663:23;659:32;656:52;;;704:1;701;694:12;656:52;727:29;746:9;727:29;:::i;:::-;717:39;803:2;788:18;;;;775:32;;-1:-1:-1;;;559:254:58:o;1936:610::-;2022:6;2030;2083:2;2071:9;2062:7;2058:23;2054:32;2051:52;;;2099:1;2096;2089:12;2051:52;2139:9;2126:23;2172:18;2164:6;2161:30;2158:50;;;2204:1;2201;2194:12;2158:50;2227:22;;2280:4;2272:13;;2268:27;-1:-1:-1;2258:55:58;;2309:1;2306;2299:12;2258:55;2349:2;2336:16;2375:18;2367:6;2364:30;2361:50;;;2407:1;2404;2397:12;2361:50;2460:7;2455:2;2445:6;2442:1;2438:14;2434:2;2430:23;2426:32;2423:45;2420:65;;;2481:1;2478;2471:12;2420:65;2512:2;2504:11;;;;;2534:6;;-1:-1:-1;1936:610:58;-1:-1:-1;;;1936:610:58:o;2743:186::-;2802:6;2855:2;2843:9;2834:7;2830:23;2826:32;2823:52;;;2871:1;2868;2861:12;2823:52;2894:29;2913:9;2894:29;:::i;2934:611::-;3124:2;3136:21;;;3206:13;;3109:18;;;3228:22;;;3076:4;;3307:15;;;3281:2;3266:18;;;3076:4;3350:169;3364:6;3361:1;3358:13;3350:169;;;3425:13;;3413:26;;3468:2;3494:15;;;;3459:12;;;;3386:1;3379:9;3350:169;;;-1:-1:-1;3536:3:58;;2934:611;-1:-1:-1;;;;;2934:611:58:o;3550:127::-;3611:10;3606:3;3602:20;3599:1;3592:31;3642:4;3639:1;3632:15;3666:4;3663:1;3656:15;3682:128;3749:9;;;3770:11;;;3767:37;;;3784:18;;:::i;:::-;3682:128;;;;:::o;3815:127::-;3876:10;3871:3;3867:20;3864:1;3857:31;3907:4;3904:1;3897:15;3931:4;3928:1;3921:15;3947:135;3986:3;4007:17;;;4004:43;;4027:18;;:::i;:::-;-1:-1:-1;4074:1:58;4063:13;;3947:135::o;4087:125::-;4152:9;;;4173:10;;;4170:36;;;4186:18;;:::i","linkReferences":{}},"methodIdentifiers":{"advanceKey(bytes32)":"226b09d4","chainCount()":"e02e1bfd","deactivateChain(bytes32)":"758b9ac0","getChainInfo(bytes32)":"7e482f47","getCurrentPKH(bytes32)":"650e270d","getNextPKH(bytes32)":"ba8285c8","getOwnerChains(address)":"ce051de9","getRemainingKeys(bytes32)":"14c0a9b3","keyChains(bytes32)":"72530be8","ownerChains(address,uint256)":"52f4e24c","registerKeyChain(bytes32[])":"c61663b0","usedPKHs(bytes32)":"c9110153"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.31+commit.fd3a2265\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"ChainExhausted\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChainNotActive\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ChainNotFound\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"EmptyKeyArray\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidPKH\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotChainOwner\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PKHAlreadyUsed\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"}],\"name\":\"KeyChainDeactivated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"keyCount\",\"type\":\"uint256\"}],\"name\":\"KeyChainRegistered\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"pkh\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"KeyUsed\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"}],\"name\":\"advanceKey\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"chainCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"}],\"name\":\"deactivateChain\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"}],\"name\":\"getChainInfo\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"currentIndex\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalKeys\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"usedCount\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"}],\"name\":\"getCurrentPKH\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"currentPKH\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"}],\"name\":\"getNextPKH\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"nextPKH\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"getOwnerChains\",\"outputs\":[{\"internalType\":\"bytes32[]\",\"name\":\"chainIds\",\"type\":\"bytes32[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"}],\"name\":\"getRemainingKeys\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"remaining\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"keyChains\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"currentIndex\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"usedCount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"ownerChains\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32[]\",\"name\":\"pkhs\",\"type\":\"bytes32[]\"}],\"name\":\"registerKeyChain\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"chainId\",\"type\":\"bytes32\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"usedPKHs\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"Lux Network Team\",\"details\":\"Stores PKH chains for entities that need multiple one-time keys This contract provides: - Pre-registration of key chains (sequence of PKHs) - Key usage tracking (prevents reuse) - Automatic advancement through key chain See: LP-4105 (Lamport OTS for Lux Safe)\",\"kind\":\"dev\",\"methods\":{\"advanceKey(bytes32)\":{\"details\":\"Only callable by chain owner\",\"params\":{\"chainId\":\"The chain identifier\"}},\"deactivateChain(bytes32)\":{\"details\":\"Only callable by chain owner\",\"params\":{\"chainId\":\"The chain identifier\"}},\"getChainInfo(bytes32)\":{\"params\":{\"chainId\":\"The chain identifier\"},\"returns\":{\"active\":\"Whether chain is active\",\"currentIndex\":\"Current key index\",\"owner\":\"Chain owner\",\"totalKeys\":\"Total keys in chain\",\"usedCount\":\"Number of used keys\"}},\"getCurrentPKH(bytes32)\":{\"params\":{\"chainId\":\"The chain identifier\"},\"returns\":{\"currentPKH\":\"The current (unused) PKH\"}},\"getNextPKH(bytes32)\":{\"params\":{\"chainId\":\"The chain identifier\"},\"returns\":{\"nextPKH\":\"The next PKH (or zero if last key)\"}},\"getOwnerChains(address)\":{\"params\":{\"owner\":\"The owner address\"},\"returns\":{\"chainIds\":\"Array of chain IDs\"}},\"getRemainingKeys(bytes32)\":{\"params\":{\"chainId\":\"The chain identifier\"},\"returns\":{\"remaining\":\"Number of unused keys\"}},\"registerKeyChain(bytes32[])\":{\"params\":{\"pkhs\":\"Array of public key hashes in order of use\"},\"returns\":{\"chainId\":\"The unique chain identifier\"}}},\"title\":\"LamportKeyRegistry\",\"version\":1},\"userdoc\":{\"errors\":{\"ChainExhausted()\":[{\"notice\":\"Chain exhausted (no more keys)\"}],\"ChainNotActive()\":[{\"notice\":\"Chain not active\"}],\"ChainNotFound()\":[{\"notice\":\"Chain not found\"}],\"EmptyKeyArray()\":[{\"notice\":\"Empty key array\"}],\"InvalidPKH()\":[{\"notice\":\"Invalid PKH (zero)\"}],\"NotChainOwner()\":[{\"notice\":\"Not chain owner\"}],\"PKHAlreadyUsed()\":[{\"notice\":\"PKH already used\"}]},\"events\":{\"KeyChainDeactivated(bytes32)\":{\"notice\":\"Emitted when a key chain is deactivated\"},\"KeyChainRegistered(bytes32,address,uint256)\":{\"notice\":\"Emitted when a new key chain is registered\"},\"KeyUsed(bytes32,bytes32,uint256)\":{\"notice\":\"Emitted when a key is used\"}},\"kind\":\"user\",\"methods\":{\"advanceKey(bytes32)\":{\"notice\":\"Mark current key as used and advance\"},\"chainCount()\":{\"notice\":\"Chain counter for unique IDs\"},\"deactivateChain(bytes32)\":{\"notice\":\"Deactivate a key chain\"},\"getChainInfo(bytes32)\":{\"notice\":\"Get chain info\"},\"getCurrentPKH(bytes32)\":{\"notice\":\"Get current PKH for a chain\"},\"getNextPKH(bytes32)\":{\"notice\":\"Get next PKH for a chain (for rotation commitment)\"},\"getOwnerChains(address)\":{\"notice\":\"Get all chain IDs for an owner\"},\"getRemainingKeys(bytes32)\":{\"notice\":\"Get remaining keys in chain\"},\"keyChains(bytes32)\":{\"notice\":\"Key chains by ID\"},\"ownerChains(address,uint256)\":{\"notice\":\"Chain IDs owned by address\"},\"registerKeyChain(bytes32[])\":{\"notice\":\"Register a new key chain\"},\"usedPKHs(bytes32)\":{\"notice\":\"Used PKHs (prevent reuse across chains)\"}},\"notice\":\"Registry for managing Lamport key chains\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"LamportKeyRegistry.sol\":\"LamportKeyRegistry\"},\"evmVersion\":\"prague\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\"]},\"sources\":{\"LamportKeyRegistry.sol\":{\"keccak256\":\"0xcc9b2656755b288b43556c2e34e387471a02fa9e420c6003aee1d2f001ebc15d\",\"license\":\"BSD-3-Clause\",\"urls\":[\"bzz-raw://ee027ca37d1fe3dabaf419fe56b474ba043d33ff55a004c75a3c74fa8bd0fb94\",\"dweb:/ipfs/QmXBQME38CttJQZqN1ifiY2MQzwuhTxjbDXmWQzfRwfadk\"]},\"LamportLib.sol\":{\"keccak256\":\"0xf71adc717c6d120f9bd14ee23ec341bc1df9d8c5f9da502b4810a91980ecf580\",\"license\":\"BSD-3-Clause\",\"urls\":[\"bzz-raw://6a1d7965d582e61f0f48583c1da23afd55f1977f2d6deb840b8f469e9d133689\",\"dweb:/ipfs/Qmdt2zsm38Mf7g3YoDinniWBgP1eooim62ND1UFkVGcHiC\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.31+commit.fd3a2265"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"ChainExhausted"},{"inputs":[],"type":"error","name":"ChainNotActive"},{"inputs":[],"type":"error","name":"ChainNotFound"},{"inputs":[],"type":"error","name":"EmptyKeyArray"},{"inputs":[],"type":"error","name":"InvalidPKH"},{"inputs":[],"type":"error","name":"NotChainOwner"},{"inputs":[],"type":"error","name":"PKHAlreadyUsed"},{"inputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32","indexed":true}],"type":"event","name":"KeyChainDeactivated","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32","indexed":true},{"internalType":"address","name":"owner","type":"address","indexed":true},{"internalType":"uint256","name":"keyCount","type":"uint256","indexed":false}],"type":"event","name":"KeyChainRegistered","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32","indexed":true},{"internalType":"bytes32","name":"pkh","type":"bytes32","indexed":true},{"internalType":"uint256","name":"index","type":"uint256","indexed":false}],"type":"event","name":"KeyUsed","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32"}],"stateMutability":"nonpayable","type":"function","name":"advanceKey"},{"inputs":[],"stateMutability":"view","type":"function","name":"chainCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32"}],"stateMutability":"nonpayable","type":"function","name":"deactivateChain"},{"inputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32"}],"stateMutability":"view","type":"function","name":"getChainInfo","outputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"currentIndex","type":"uint256"},{"internalType":"uint256","name":"totalKeys","type":"uint256"},{"internalType":"uint256","name":"usedCount","type":"uint256"},{"internalType":"bool","name":"active","type":"bool"}]},{"inputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32"}],"stateMutability":"view","type":"function","name":"getCurrentPKH","outputs":[{"internalType":"bytes32","name":"currentPKH","type":"bytes32"}]},{"inputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32"}],"stateMutability":"view","type":"function","name":"getNextPKH","outputs":[{"internalType":"bytes32","name":"nextPKH","type":"bytes32"}]},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"stateMutability":"view","type":"function","name":"getOwnerChains","outputs":[{"internalType":"bytes32[]","name":"chainIds","type":"bytes32[]"}]},{"inputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32"}],"stateMutability":"view","type":"function","name":"getRemainingKeys","outputs":[{"internalType":"uint256","name":"remaining","type":"uint256"}]},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function","name":"keyChains","outputs":[{"internalType":"uint256","name":"currentIndex","type":"uint256"},{"internalType":"uint256","name":"usedCount","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"bool","name":"active","type":"bool"}]},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","name":"ownerChains","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}]},{"inputs":[{"internalType":"bytes32[]","name":"pkhs","type":"bytes32[]"}],"stateMutability":"nonpayable","type":"function","name":"registerKeyChain","outputs":[{"internalType":"bytes32","name":"chainId","type":"bytes32"}]},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function","name":"usedPKHs","outputs":[{"internalType":"bool","name":"","type":"bool"}]}],"devdoc":{"kind":"dev","methods":{"advanceKey(bytes32)":{"details":"Only callable by chain owner","params":{"chainId":"The chain identifier"}},"deactivateChain(bytes32)":{"details":"Only callable by chain owner","params":{"chainId":"The chain identifier"}},"getChainInfo(bytes32)":{"params":{"chainId":"The chain identifier"},"returns":{"active":"Whether chain is active","currentIndex":"Current key index","owner":"Chain owner","totalKeys":"Total keys in chain","usedCount":"Number of used keys"}},"getCurrentPKH(bytes32)":{"params":{"chainId":"The chain identifier"},"returns":{"currentPKH":"The current (unused) PKH"}},"getNextPKH(bytes32)":{"params":{"chainId":"The chain identifier"},"returns":{"nextPKH":"The next PKH (or zero if last key)"}},"getOwnerChains(address)":{"params":{"owner":"The owner address"},"returns":{"chainIds":"Array of chain IDs"}},"getRemainingKeys(bytes32)":{"params":{"chainId":"The chain identifier"},"returns":{"remaining":"Number of unused keys"}},"registerKeyChain(bytes32[])":{"params":{"pkhs":"Array of public key hashes in order of use"},"returns":{"chainId":"The unique chain identifier"}}},"version":1},"userdoc":{"kind":"user","methods":{"advanceKey(bytes32)":{"notice":"Mark current key as used and advance"},"chainCount()":{"notice":"Chain counter for unique IDs"},"deactivateChain(bytes32)":{"notice":"Deactivate a key chain"},"getChainInfo(bytes32)":{"notice":"Get chain info"},"getCurrentPKH(bytes32)":{"notice":"Get current PKH for a chain"},"getNextPKH(bytes32)":{"notice":"Get next PKH for a chain (for rotation commitment)"},"getOwnerChains(address)":{"notice":"Get all chain IDs for an owner"},"getRemainingKeys(bytes32)":{"notice":"Get remaining keys in chain"},"keyChains(bytes32)":{"notice":"Key chains by ID"},"ownerChains(address,uint256)":{"notice":"Chain IDs owned by address"},"registerKeyChain(bytes32[])":{"notice":"Register a new key chain"},"usedPKHs(bytes32)":{"notice":"Used PKHs (prevent reuse across chains)"}},"version":1}},"settings":{"remappings":["forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"LamportKeyRegistry.sol":"LamportKeyRegistry"},"evmVersion":"prague","libraries":{}},"sources":{"LamportKeyRegistry.sol":{"keccak256":"0xcc9b2656755b288b43556c2e34e387471a02fa9e420c6003aee1d2f001ebc15d","urls":["bzz-raw://ee027ca37d1fe3dabaf419fe56b474ba043d33ff55a004c75a3c74fa8bd0fb94","dweb:/ipfs/QmXBQME38CttJQZqN1ifiY2MQzwuhTxjbDXmWQzfRwfadk"],"license":"BSD-3-Clause"},"LamportLib.sol":{"keccak256":"0xf71adc717c6d120f9bd14ee23ec341bc1df9d8c5f9da502b4810a91980ecf580","urls":["bzz-raw://6a1d7965d582e61f0f48583c1da23afd55f1977f2d6deb840b8f469e9d133689","dweb:/ipfs/Qmdt2zsm38Mf7g3YoDinniWBgP1eooim62ND1UFkVGcHiC"],"license":"BSD-3-Clause"}},"version":1},"id":2}